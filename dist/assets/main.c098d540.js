import{C as t}from"./vendor.b8517bc6.js";function e(t){iziToast.success({title:"Success",message:t})}function n(t){iziToast.error({title:"Error",message:t})}const o="https://todo-app-csoc.herokuapp.com/",a=document.getElementById("logoutButton");a&&a.addEventListener("click",(function(){localStorage.removeItem("token"),window.location.href="/login/"}));const s=document.getElementById("registerButton");s&&s.addEventListener("click",(function(){const e=document.getElementById("inputFirstName").value.trim(),a=document.getElementById("inputLastName").value.trim(),s=document.getElementById("inputEmail").value.trim(),d=document.getElementById("inputUsername").value.trim(),i=document.getElementById("inputPassword").value;if(function(t,e,o,a,s){return""===t||""===e||""===o||""===a||""===s?(n("Please fill all the fields correctly."),!1):!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(o)||(n("Please enter a valid email address."),!1)}(e,a,s,d,i)){l="Please wait...",iziToast.info({title:"Info",message:l});t({url:o+"auth/register/",method:"post",data:{name:e+" "+a,email:s,username:d,password:i}}).then((function({data:t,status:e}){localStorage.setItem("token",t.token),console.log("register"),window.location.href="/"})).catch((function(t){n("An account using same email or username is already created")}))}var l}));const d=document.getElementById("loginButton");d&&d.addEventListener("click",(function(){console.log("login");const e=document.getElementById("inputUsername").value.trim(),a=document.getElementById("inputPassword").value;t({url:o+"auth/login/",method:"post",data:{username:e,password:a}}).then((function({data:t,status:e}){localStorage.setItem("token",t.token),window.location.href="/",console.log("authorised user")})).catch((function(t){n("The user is not authorised"),window.location.href="/register/"}))}));const i=document.getElementById("addTaskButton");function l(a,s){const d=document.getElementById("tasksList"),i=document.createElement("li");i.className="list-group-item d-flex justify-content-between align-items-center",i.innerHTML=`\n    <input id="input-button-${a}" type="text" class="form-control todo-edit-task-input hideme" placeholder="Edit The Task">\n    <div id="done-button-${a}"  class="input-group-append hideme">\n        <button class="btn btn-outline-secondary todo-update-task" type="button" id="updateTask-${a}">Done</button>\n    </div>\n    <div id="task-${a}" class="todo-task">\n        ${s}\n    </div>\n    <span id="task-actions-${a}">\n        <button style="margin-right:5px;" type="button" id="editTask-${a}" class="btn btn-outline-warning">\n            <img src="https://res.cloudinary.com/nishantwrp/image/upload/v1587486663/CSOC/edit.png" width="18px" height="20px">\n        </button>\n        <button type="button" class="btn btn-outline-danger" id="deleteTask-${a}">\n            <img src="https://res.cloudinary.com/nishantwrp/image/upload/v1587486661/CSOC/delete.svg" width="18px" height="22px">\n        </button>\n    </span>\n    `,i.id=`todo-${a}`,d.appendChild(i);const l=document.getElementById(`deleteTask-${a}`),c=document.getElementById(`editTask-${a}`),u=document.getElementById(`updateTask-${a}`);l.addEventListener("click",(()=>function(a){console.log("deleting ",a),t({headers:{Authorization:"Token "+localStorage.getItem("token")},url:o+"todo/"+a+"/",method:"delete"}).then((function({data:t,status:n}){document.querySelector(`#todo-${a}`).remove(),e("Task was deleted successfully!")})).catch((function(t){n("task could not be deleted!")}))}(a))),c.addEventListener("click",(()=>function(t){document.getElementById("task-"+t).classList.add("hideme"),document.getElementById("task-actions-"+t).classList.add("hideme"),document.getElementById("input-button-"+t).classList.remove("hideme"),document.getElementById("done-button-"+t).classList.remove("hideme"),console.log(t)}(a))),u.addEventListener("click",(()=>function(a){const s=document.getElementById("input-button-"+a).value;s?(t({headers:{Authorization:"Token "+localStorage.getItem("token")},url:o+"todo/"+a+"/",method:"patch",data:{title:s}}).then((function({data:t,status:e}){document.getElementById("task-"+a).classList.remove("hideme"),document.getElementById("task-actions-"+a).classList.remove("hideme"),document.getElementById("input-button-"+a).classList.add("hideme"),document.getElementById("done-button-"+a).classList.add("hideme"),document.getElementById("task-"+a).innerText=s})).catch((function(t){n("Task could not be updated!")})),e("Task was updated successfully!")):n("Input field is empty!")}(a)))}i&&i.addEventListener("click",(function(){const n=document.getElementById("inputTask").value.trim();t({headers:{Authorization:"Token "+localStorage.getItem("token")},url:o+"todo/create/",method:"post",data:{title:n}}).then((function(e){t({headers:{Authorization:"Token "+localStorage.getItem("token")},url:o+"todo/",method:"get"}).then((function({data:t,status:e}){l(t[t.length-1].id,n)}))})),document.getElementById("inputTask").value="",""!=n&&e("Task was added successfully!")}));export{l as s};
